package com.hisun.CM;

import com.hisun.BP.*;
import com.hisun.SC.*;
import com.hisun.TC.XStreamUtil;

import java.io.IOException;
import java.sql.SQLException;

public class CMOT8060 {
    String JIBS_tmp_str[] = new String[10];
    String WS_ERR_MSG = " ";
    short WS_FLD_NO = 0;
    int WS_I = 0;
    CMCMSG_ERROR_MSG CMCMSG_ERROR_MSG = new CMCMSG_ERROR_MSG();
    BPCMSG_ERROR_MSG BPCMSG_ERROR_MSG = new BPCMSG_ERROR_MSG();
    SCCEXCP SCCEXCP = new SCCEXCP();
    SCCCALL SCCCALL = new SCCCALL();
    SCCMSG SCCMSG = new SCCMSG();
    SCCFMT SCCFMT = new SCCFMT();
    CMCF806 CMCF806 = new CMCF806();
    CMCUINQA CMCUINQA = new CMCUINQA();
    BPRMSG BPRMSG = new BPRMSG();
    SCCPRMR SCCPRMR = new SCCPRMR();
    SCCGWA SCCGWA;
    CMB8060_AWA_8060 CMB8060_AWA_8060;
    SCCGSCA_SC_AREA GWA_SC_AREA;
    SCCGBPA_BP_AREA GWA_BP_AREA;
    public void MP(SCCGWA SCCGWA) throws IOException,SQLException,Exception {
        this.SCCGWA = SCCGWA;
        CEP.TRC(SCCGWA);
        CEP.TRC(SCCGWA, "A000-MAIN-PROC");
        A000_INIT_PROC();
        B000_MAIN_PROC();
        CEP.TRC(SCCGWA, "CMOT8060 return!");
        Z_RET();
    }
    public void A000_INIT_PROC() throws IOException,SQLException,Exception {
        CEP.TRC(SCCGWA, "A000-INIT-PROC-BEGIN");
        SCCGWA.COMM_AREA.AWA_AREA_PTR = SCCGWA.COMM_AREA.AWA_AREA_PTR.replaceAll("BODY>", "CMB8060_AWA_8060>");
        CMB8060_AWA_8060 = (CMB8060_AWA_8060) XStreamUtil.xmlToBean(SCCGWA.COMM_AREA.AWA_AREA_PTR);
        GWA_BP_AREA = (SCCGBPA_BP_AREA) SCCGWA.BP_AREA_PTR;
        GWA_SC_AREA = (SCCGSCA_SC_AREA) SCCGWA.SC_AREA_PTR;
    }
    public void B000_MAIN_PROC() throws IOException,SQLException,Exception {
        B010_CHK_INPUT_PROC();
        B030_INQUIRE_AC_PROC();
        B070_OUTPUT_PROC();
    }
    public void B010_CHK_INPUT_PROC() throws IOException,SQLException,Exception {
        CEP.TRC(SCCGWA, "B010-CHK-INPUT-PROC-BEGIN");
        CEP.TRC(SCCGWA, CMB8060_AWA_8060.AC_CNT);
        if (CMB8060_AWA_8060.AC_CNT > 0 
            && CMB8060_AWA_8060.AC_CNT <= 10) {
        } else {
            CEP.TRC(SCCGWA, "M-CM-AC-CNT-ERRO");
            WS_ERR_MSG = CMCMSG_ERROR_MSG.CM_AC_CNT_ERRO;
            S000_ERR_MSG_PROC();
        }
    }
    public void B030_INQUIRE_AC_PROC() throws IOException,SQLException,Exception {
        CEP.TRC(SCCGWA, "B030-INQUIRE-AC-PROC-BEGIN");
        CEP.TRC(SCCGWA, "AWA-AC-CNT IS RIGHT");
        for (WS_I = 1; WS_I <= CMB8060_AWA_8060.AC_CNT; WS_I += 1) {
            IBS.init(SCCGWA, CMCUINQA);
            CMCUINQA.INPUT_RC.AC1 = CMB8060_AWA_8060.ARRAY[WS_I-1].AC;
            CMCUINQA.INPUT_RC.CCY1 = CMB8060_AWA_8060.ARRAY[WS_I-1].CCY;
            CMCUINQA.INPUT_RC.CCY_TYPE1 = CMB8060_AWA_8060.ARRAY[WS_I-1].CCY_TYPE;
            CMCUINQA.INPUT_RC.SHOW_BAL = CMB8060_AWA_8060.ARRAY[WS_I-1].SHOW_BAL;
            S000_CALL_CMZUINQA();
            B050_MOVE_PROC();
        }
    }
    public void B050_MOVE_PROC() throws IOException,SQLException,Exception {
        IBS.init(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1]);
        CMCF806.AC_CNT = CMB8060_AWA_8060.AC_CNT;
        CEP.TRC(SCCGWA, CMB8060_AWA_8060.AC_CNT);
        CMCF806.ACNO_ARRAY[WS_I-1].AC = CMB8060_AWA_8060.ARRAY[WS_I-1].AC;
        CEP.TRC(SCCGWA, "2020202020202020");
        CMCF806.ACNO_ARRAY[WS_I-1].AC_NO = CMCUINQA.OUTPUT_RC.AC_NO;
        CEP.TRC(SCCGWA, WS_I);
        CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_NO);
        CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].AC_NO);
        CMCF806.ACNO_ARRAY[WS_I-1].CCY = CMCUINQA.INPUT_RC.CCY1;
        CMCF806.ACNO_ARRAY[WS_I-1].CCY_TYPE = CMCUINQA.INPUT_RC.CCY_TYPE1;
        if (CMCUINQA.RC.RC_CODE != 0 
            && CMCUINQA.RC.RC_CODE != ' ') {
            CMCF806.ACNO_ARRAY[WS_I-1].RESULT = 'R';
            CMCF806.ACNO_ARRAY[WS_I-1].RT_CD = IBS.CLS2CPY(SCCGWA, CMCUINQA.RC);
            R000_GET_MSG_INFO();
            CMCF806.ACNO_ARRAY[WS_I-1].RT_MSG = BPRMSG.DATA_TXT.CMSG_TEXT;
            CEP.TRC(SCCGWA, BPRMSG.DATA_TXT.MSG_TEXT);
        } else {
            CMCF806.ACNO_ARRAY[WS_I-1].RESULT = 'A';
            CMCF806.ACNO_ARRAY[WS_I-1].RT_CD = " ";
            CMCF806.ACNO_ARRAY[WS_I-1].RT_MSG = " ";
            CMCF806.ACNO_ARRAY[WS_I-1].CI_NO = CMCUINQA.OUTPUT_RC.CI_NO;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.CI_NO);
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].CI_NO);
            CMCF806.ACNO_ARRAY[WS_I-1].CI_TYPE = CMCUINQA.OUTPUT_RC.CI_TYPE;
            CMCF806.ACNO_ARRAY[WS_I-1].AC_CNM = CMCUINQA.OUTPUT_RC.AC_CNM;
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].AC_CNM);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_ENM = CMCUINQA.OUTPUT_RC.AC_ENM;
            CMCF806.ACNO_ARRAY[WS_I-1].OPEN_BR = CMCUINQA.OUTPUT_RC.OPEN_BR;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.OPEN_BR);
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].OPEN_BR);
            CMCF806.ACNO_ARRAY[WS_I-1].DOM_BR = CMCUINQA.OUTPUT_RC.DOM_BR;
            CMCF806.ACNO_ARRAY[WS_I-1].OPEN_DATE = CMCUINQA.OUTPUT_RC.OPEN_DATE;
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].OPEN_DATE);
            CMCF806.ACNO_ARRAY[WS_I-1].PROD_CODE = CMCUINQA.OUTPUT_RC.PROD_CODE;
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].PROD_CODE);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_TYPE = CMCUINQA.OUTPUT_RC.AC_TYPE;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_TYPE);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_ATTR = CMCUINQA.OUTPUT_RC.AC_ATTR;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_ATTR);
            CEP.TRC(SCCGWA, CMCF806.ACNO_ARRAY[WS_I-1].AC_ATTR);
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_ATTR);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_STS = CMCUINQA.OUTPUT_RC.AC_STS;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_STS);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_STSW = CMCUINQA.OUTPUT_RC.AC_STSW;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.AC_STSW);
            CMCF806.ACNO_ARRAY[WS_I-1].AC_BLOCK_STS = CMCUINQA.OUTPUT_RC.AC_BLOCK_STS;
            CMCF806.ACNO_ARRAY[WS_I-1].AMT_HOLD_STS = CMCUINQA.OUTPUT_RC.AMT_HOLD_STS;
            CMCF806.ACNO_ARRAY[WS_I-1].CCY_STS = CMCUINQA.OUTPUT_RC.CCY_STS;
            CMCF806.ACNO_ARRAY[WS_I-1].PB_STS = CMCUINQA.OUTPUT_RC.PB_STS;
            CMCF806.ACNO_ARRAY[WS_I-1].CROS_DR_FLG = CMCUINQA.OUTPUT_RC.CROS_DR_FLG;
            CMCF806.ACNO_ARRAY[WS_I-1].CROS_CR_FLG = CMCUINQA.OUTPUT_RC.CROS_CR_FLG;
            CMCF806.ACNO_ARRAY[WS_I-1].DRCR_FLG = CMCUINQA.OUTPUT_RC.DRCR_FLG;
            CMCF806.ACNO_ARRAY[WS_I-1].SPC_KIND = CMCUINQA.OUTPUT_RC.SPC_KIND;
            CMCF806.ACNO_ARRAY[WS_I-1].LAST_DATE = CMCUINQA.OUTPUT_RC.LAST_DATE;
            CMCF806.ACNO_ARRAY[WS_I-1].STD_AC_FLG = CMCUINQA.OUTPUT_RC.STD_AC_FLG;
            CMCF806.ACNO_ARRAY[WS_I-1].STD_AC = CMCUINQA.OUTPUT_RC.STD_AC;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_MEDI = CMCUINQA.OUTPUT_RC.CARD_MEDI;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_STS = CMCUINQA.OUTPUT_RC.CARD_STS;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_STSW = CMCUINQA.OUTPUT_RC.CARD_STSW;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_PROD = CMCUINQA.OUTPUT_RC.CARD_PROD;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_LINK_TYP = CMCUINQA.OUTPUT_RC.CARD_LINK_TYP;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_PV_TYP = CMCUINQA.OUTPUT_RC.CARD_PV_TYP;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_MOBI_TYP = CMCUINQA.OUTPUT_RC.CARD_MOBI_TYP;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_PC_TYP = CMCUINQA.OUTPUT_RC.CARD_PC_TYP;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_JOINT_TYP = CMCUINQA.OUTPUT_RC.CARD_JOINT_TYP;
            CMCF806.ACNO_ARRAY[WS_I-1].CARD_CATLG = CMCUINQA.OUTPUT_RC.CARD_CATLG;
            CMCF806.ACNO_ARRAY[WS_I-1].ISSUE_BR = CMCUINQA.OUTPUT_RC.ISSUE_BR;
            CMCF806.ACNO_ARRAY[WS_I-1].ISSUE_DT = CMCUINQA.OUTPUT_RC.ISSUE_DT;
            CMCF806.ACNO_ARRAY[WS_I-1].EXP_DT = CMCUINQA.OUTPUT_RC.EXP_DT;
            CMCF806.ACNO_ARRAY[WS_I-1].EXP_DT = CMCUINQA.OUTPUT_RC.EXP_DT;
            CMCF806.ACNO_ARRAY[WS_I-1].LEDGER_BAL = CMCUINQA.OUTPUT_RC.LEDGER_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].AVAIL_BAL = CMCUINQA.OUTPUT_RC.AVAIL_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].HOLD_BAL = CMCUINQA.OUTPUT_RC.HOLD_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].TOT_BAL = CMCUINQA.OUTPUT_RC.TOT_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].DD_CURR_BAL = CMCUINQA.OUTPUT_RC.DD_CURR_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].DD_AVA_BAL = CMCUINQA.OUTPUT_RC.DD_AVA_BAL;
            CMCF806.ACNO_ARRAY[WS_I-1].TD_BAL = CMCUINQA.OUTPUT_RC.TD_BAL;
            CEP.TRC(SCCGWA, CMCUINQA.OUTPUT_RC.TD_BAL);
            CEP.TRC(SCCGWA, "10101010101010");
        }
    }
    public void B070_OUTPUT_PROC() throws IOException,SQLException,Exception {
        IBS.init(SCCGWA, SCCFMT);
        SCCFMT.FMTID = "35806";
        SCCFMT.ODM_FLG = 'Y';
        SCCFMT.DATA_PTR = CMCF806;
        SCCFMT.DATA_LEN = 11152;
        IBS.FMT(SCCGWA, SCCFMT);
    }
    public void S000_CALL_CMZUINQA() throws IOException,SQLException,Exception {
        CEP.TRC(SCCGWA, "S000-CALL-CMZUINQA-BEGIN");
        IBS.init(SCCGWA, SCCCALL);
        SCCCALL.CPN_NAME = "CM-U-INQ-AC-INFO";
        SCCCALL.COMMAREA_PTR = CMCUINQA;
        SCCCALL.NOFMT_FLG = 'Y';
        SCCCALL.ERRHDL_FLG = 'Y';
        IBS.CALL(SCCGWA, SCCCALL);
        CEP.TRC(SCCGWA, "99999999999999");
        CEP.TRC(SCCGWA, CMCUINQA.RC);
    }
    public void S000_ERR_MSG_PROC_CONTINUE() throws IOException,SQLException,Exception {
        CEP.ERRC(SCCGWA, WS_ERR_MSG, WS_FLD_NO);
    }
    public void S000_ERR_MSG_PROC_LAST() throws IOException,SQLException,Exception {
        CEP.ERR(SCCGWA, WS_ERR_MSG, WS_FLD_NO);
    }
    public void S000_ERR_MSG_PROC() throws IOException,SQLException,Exception {
        CEP.ERR(SCCGWA, WS_ERR_MSG);
    }
    public void R000_GET_MSG_INFO() throws IOException,SQLException,Exception {
        IBS.init(SCCGWA, SCCPRMR);
        IBS.init(SCCGWA, BPRMSG);
        BPRMSG.KEY.TYP = "MSG";
        BPRMSG.KEY.CD = IBS.CLS2CPY(SCCGWA, CMCUINQA.RC);
        IBS.CPY2CLS(SCCGWA, BPRMSG.KEY.CD, BPRMSG.KEY.REDEFINES5);
        CEP.TRC(SCCGWA, SCCGWA.COMM_AREA.ERR_MSG_ID);
        SCCPRMR.DAT_PTR = BPRMSG;
        IBS.CALLCPN(SCCGWA, "SC-PARM-READ", SCCPRMR);
            JIBS_tmp_str[0] = IBS.CLS2CPY(SCCGWA, CMCUINQA.RC.RC_CODE);
        if (JIBS_tmp_str[0].equalsIgnoreCase(BPCMSG_ERROR_MSG.BP_NORMAL)) {
            JIBS_tmp_str[0] = IBS.CLS2CPY(SCCGWA, CMCUINQA.RC.RC_CODE);
        } else if (JIBS_tmp_str[0].equalsIgnoreCase(BPCMSG_ERROR_MSG.BP_PARM_NOTFND)) {
            CMCF806.ACNO_ARRAY[WS_I-1].RT_MSG = BPRMSG.DATA_TXT.CMSG_TEXT;
        } else {
            WS_ERR_MSG = IBS.CLS2CPY(SCCGWA, SCCPRMR.RC);
            S000_ERR_MSG_PROC();
        }
        CEP.TRC(SCCGWA, BPRMSG.DATA_TXT.MSG_TEXT);
        CEP.TRC(SCCGWA, BPRMSG.DATA_TXT.CMSG_TEXT);
    }
    public void Z_RET() throws IOException,SQLException,Exception {
        return;
    }
    public void B_DB_EXCP() throws IOException,SQLException,Exception {
        throw new SQLException(SCCGWA.e);
    }
}
